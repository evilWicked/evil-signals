<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>evil signals: evil signals</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">evil signals
   </div>
   <div id="projectbrief">Lightweight Cross Platform Signals and Slots Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">evil signals </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>About </h2>
<p>evil signals provides a simple lightweight C++ threadsafe signals and slots implementation. It contains both threadsafe and non threadsafe versions. The normal (non threadsafe but faster) version consists of evil::Signal&lt;...Args&gt; paired with evil::Slot&lt;...Args&gt; . The threadsafe pair evil::ThreadSignal&lt;...Args&gt; paired with evil::ThreadSlot&lt;...Args&gt; utilises a Read Write Lock that enables parallel dispatches together with sequential modifications.</p>
<p>It is intended to be used as a source only distribution relying upon C++11 std libraries.</p>
<h2>Documentation </h2>
<p>The Doxygen documentation can be found on github at <a href="http://evilwicked.github.io/evil-signals/index.html">http://evilwicked.github.io/evil-signals/index.html</a>. Alternatively you can build your own using the doxyfile in the docs/ directory.</p>
<h2>Installation </h2>
<p>evil signals is installed by simply including the source. The simplest way to do this is to copy the whole <code>evil-signals/</code> directory somewhere into your include path. Alternatively point your include path to wherever you have cloned the repo.</p>
<p>include header files as usual using </p><pre class="fragment">#include "evil/signals/signals.h"
#include "evil/signals/slots.h"
</pre><p>To bring in the implementation (*.cpp) files simply </p><pre class="fragment">#include "evil/signals/wrapper.cpp"
</pre><p>into a source file somewhere. You can give it its own file or include it into an existing files. Whatever feels best. Take care to keep the directory structure under evil/ intact. This contains other code that is used by either signals itself or the examples.</p>
<p>Why not use CMake? CMake is used in examples but not for the main code. CMake would require configuration and testing for each platform which if it doesn't work would generate issues. So no.</p>
<h2>Compiler Options </h2>
<p>Nothing special. Just treat it as your own code and optimise to suit your own needs.</p>
<h2>Dependencies </h2>
<p>None.</p>
<p>Built using C++11 std libraries.</p>
<h2>Examples </h2>
<p>The examples code can be built using CMake. But alas I don't have a Mac or any of the plethora of Linux boxes that exist out there so they have only been run on Windows.</p>
<p>Run CMake as usual. Point the CMake source dir to the <code>evil-signals/examples/</code> and the CMake build dir to <code>evil-signals/examples/build/</code> which is where your <code>evil-signals-examples.sln</code> will end up as well as a pile of CMake inspired debris.</p>
<h2>Usage </h2>
<p>Usage is fairly simple. Both the signal and the slot are templated to handle different arguments being passed between the signal and the slot when a signal is dispatched. </p><pre class="fragment">evil::Signal&lt;...Args&gt;
evil::Slot&lt;...Args&gt;
</pre><p>As an example if we want to use callbacks of the form </p><pre class="fragment">void foo(int i){...};
</pre><h3>Create a signal slot pair</h3>
<p>We can create a signal and slot that would enable an integer to be passed from the slot to the signal with: </p><pre class="fragment">evil::Signal&lt;int&gt; sig;
evil::Slot&lt;int&gt; slot;
</pre><h4>Threadsafe</h4>
<p>The threadsafe versions are created using. </p><pre class="fragment">evil::ThreadSignal&lt;...Args&gt; sig;
evil::ThreadSlot&lt;...Args&gt; slot;
</pre><p>The only restriction is that callbacks need to have a void return. The signal has no way of doing anything with a return value anyway.</p>
<h3>Attach a callback to the slot.</h3>
<p>To attach a callback to the slot you can use a standard function, a lambda or a class member. Normal functions and lambdas use "attach" where classes that need an instance of the class to be bound use "attach_class". So if foo is a function </p><pre class="fragment">void foo(){}
</pre><p>you would use; </p><pre class="fragment">slot.attach(foo);
</pre><p>If C is a class with an instance c you would use </p><pre class="fragment">class C{
public:
void foo(){}
}

C c;

slot.attach_class(&amp;c,foo);
</pre><h3>Connect the slot to the signal</h3>
<p>To connect the slot to the signal you use add from the signal. </p><pre class="fragment">sig.add(&amp;slot)
</pre><p>similarly to disconnect them you use remove. </p><pre class="fragment">sig.remove(&amp;slot)
</pre><p>The add signature allows an optional integer priority. Higher priority lots fire earlier. You can also set a slot to fire once and automatically be removed. This can be useful when booting into code where you are waiting for an event that will occur only once. </p><pre class="fragment">void add(SlotBase *slot, int priority = 0, bool active = true);
</pre><h3>Dispatch a signal.</h3>
<p>To dispatch a signal you simply call dispatch passing any arguments to it, In the above </p><pre class="fragment">sig.dispatch(1);
</pre><p>would pass 1 to each attached slot when dispatch is called.</p>
<h4>Passing by reference.</h4>
<p>You can pass objects by reference to slots. This is not a constant reference, so be careful with this. I had considered making it const but that would restrict what you do. In the choice between you being careful or you not being allowed to do something - I take the Javascript view that its your code - do what you want. This means that if you define </p><pre class="fragment">evil::Signal&lt;int&amp;&gt; sig;
evil::Slot&lt;int&amp;&gt; slot1;
evil::Slot&lt;int&amp;&gt; slot2;

void foo(int &amp;i){i++;}
sig.add(&amp;slot1);
sig.add(&amp;slot2);

int i=0;
sig.dispatch(i);
</pre><p>i would now be now equal to 2 becuase it would be incremented with every call of the slot by the signal.</p>
<p>Slots can be deactivated and reactivated. </p><pre class="fragment">slot.setActive(false);
slot.setActive(true);
</pre><h2>Multithreading </h2>
<p>There are two versions of the both the signals and the slots that are derived from the same underlying classes. The normal versions <a class="el" href="classevil_1_1_signal.html" title="The single threaded specialisation of the SignalBase class. ">evil::Signal</a> and <a class="el" href="classevil_1_1_slot.html" title="The single threaded specialisation of the SlotBase class. ">evil::Slot</a> are not thread safe. The threadsafe classes are <a class="el" href="classevil_1_1_thread_signal.html" title="The thread safe specialisation of the underlying SignalBase class. ">evil::ThreadSignal</a> and <a class="el" href="classevil_1_1_thread_slot.html" title="The thread safe specialisation of the underlying SlotBase class. ">evil::ThreadSlot</a> These are implemented using read write locks enabling parallel dispatch of signals alongside mutex locked changes to the signal and slot.</p>
<h2>Releases </h2>
<p>1.0.0 Initial release.</p>
<h2>License </h2>
<p>BSD like. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
